//>>built
define("epi/shell/command/builder/MenuAssembler",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/Stateful"],function(_1,_2,_3,_4,_5){return _3([_5],{commandSource:null,configuration:null,_commandSourceConnect:null,destroy:function(){_2.disconnect(this._commandSourceConnect);},build:function(){this.set("commandSource",this.commandSource);},_commandSourceSetter:function(_6){if(this._commandSourceConnect&&this.commandSource){_2.disconnect(this._commandSourceConnect);this._removeCommands(this.commandSource.getCommands());}this.commandSource=_6;if(this.commandSource){this._addCommands(this.commandSource.getCommands());this._commandSourceConnect=_2.connect(this.commandSource,"onCommandsChanged",this,this._commandsChanged);}},_commandsChanged:function(_7,_8,_9){if(_8){this._removeCommands(_8);}if(_9){this._addCommands(_9);}},_getBuildInfo:function(_a){var _b,_c=_a.category;_1.some(this.configuration,function(_d){if(_d.category==_c){_b=_d;return true;}return false;});return _b;},_addCommands:function(_e){_1.forEach(_e,this._addCommand,this);},_addCommand:function(_f){var _10=this._getBuildInfo(_f);if(_10){_10.builder.create(_f,_10.target);}},_removeCommands:function(_11){_1.forEach(_11,function(_12){var _13=this._getBuildInfo(_12);if(_13){_13.builder.remove(_12,_13.target);}},this);}});});