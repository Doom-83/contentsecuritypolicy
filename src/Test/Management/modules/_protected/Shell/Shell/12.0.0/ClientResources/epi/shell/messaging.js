//>>built
define("epi/shell/messaging",["dojo/_base/lang","dojo/topic","epi"],function(_1,_2,_3){var _4={};var _5={subscribe:function(_6,_7,_8){return _2.subscribe(_2,_1.hitch(_7,_8));},unsubscribe:function(_9){if(_9){_9.remove();}},publish:function(_a,_b){var _c=arguments[2]||null;for(var i in _4){var _d=_4[i];if(_d.name!==_c){_d.context[_d.publishMethod]({data:_a,__epiPublished:true},_b);}}},registerLibrary:function(_e,_f,_10,_11){_4[_e]={name:_e,publishMethod:_10};_4[_e].context=_f;_4[_e].originalPublish=_f[_10];_f[_10]=function(_12,_13){var _14=Array.prototype.slice.call(arguments);if(!_12.__epiPublished){if(!_11||(_11.apply(this,arguments))){_5.publish(_12,_13,_e);}}else{_14[0]=_12.data;}_4[_e].originalPublish.apply(this,_14);};},unRegisterLibrary:function(_15){var lib=_4[_15];lib.context[lib.publishMethod]=lib.originalPublish;delete _4[_15];}};_5.registerLibrary("dojo",_2,"publish");_1.setObject("epi.shell.messaging",_5);return _5;});