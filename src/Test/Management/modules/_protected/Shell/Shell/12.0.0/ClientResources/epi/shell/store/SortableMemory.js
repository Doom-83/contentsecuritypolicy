//>>built
define("epi/shell/store/SortableMemory",["dojo/_base/declare","epi/shell/store/queryUtils","dojo/store/Memory"],function(_1,_2,_3){return _1(_3,{getSibling:function(_4,_5){var _6=this.data,_7=this.index,id=this.getIdentity(_4);if(!(id in _7)){throw new Error("Object specified in options.before does not exist");}var _8=_5?-1:1,_9=_7[id]+_8;if(_9<0||_9>=_6.length){return null;}return _6[_9];},put:function(_a,_b){var _c=this.data,_d=this.idProperty;var id=_a[_d]=(_b&&"id" in _b)?_b.id:_d in _a?_a[_d]:Math.random();var _e=false;if(id in this.index){_e=true;}if(_b){if(_b.overwrite===false){if(_e){throw new Error("Object already exists");}}if(_b.before||(_b.hasOwnProperty("before")&&_e)){var _f=this.index[id],_10=_c.length;if(_b.before){var _11=this.getIdentity(_b.before);_10=this.index[_11];}if(_f<_10){--_10;}if(_10!==undefined){if(_e){this.remove(id);}_c.splice(_10,0,_a);this.setData(_c);return id;}else{throw new Error("Object specified in options.before does not exist");}}}if(_e){_c[this.index[id]]=_a;}else{this.index[id]=_c.push(_a)-1;}return id;},queryEngine:function(_12,_13){_12=_2.createFilter(_12,_13);function _14(){return this.data.filter(_12);};_14.matches=_12;return _14.bind(this);}});});