//>>built
define("epi/shell/widget/overlay/Item",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-style","dojo/mouse","dojo/on","dojo/promise/all","dojo/when","dijit/_CssStateMixin","dijit/_TemplatedMixin","./_Base","epi/shell/dnd/Target"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9,_a,_b,_c){return _2([_b,_a,_9],{baseClass:"epi-overlay-item",name:"",_displayName:null,_description:null,_setDisplayNameAttr:function(_d){this._displayName=_d;if(this.informationNode){this.informationNode.textContent=_d;}},_setDescriptionAttr:function(_e){this._description=_e;if(this.informationNode){this.informationNode.title=_e||"";}},templateString:"<div data-dojo-attach-point=\"item\">                            <div data-dojo-attach-point=\"containerNode\" class=\"epi-overlay-item-container\">                                <span data-dojo-attach-point=\"informationNode\" class=\"epi-overlay-item-info\"></span>                                <div class=\"epi-overlay-bracket\"></div>                            </div>                        </div>",allowedDndTypes:null,error:false,childItems:null,parent:null,onClick:function(_f,e){},onDrop:function(_10,_11){},onMouseEnter:function(e){},onMouseLeave:function(e){},constructor:function(){this.childItems=[];},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"click",_3.hitch(this,function(e){this.onClick(this,e);})),on(this.domNode,_6.enter,_3.hitch(this,this.onMouseEnter)),on(this.domNode,_6.leave,_3.hitch(this,this.onMouseLeave)));this.transferDndControlTo(this);},destroy:function(){if(this.parent&&this.parent.removeChild){this.parent.removeChild(this);}for(var i=0;i<this.childItems.length;i++){this.childItems[i].destroyRecursive();}this.childItems=null;if(this._dropTarget){this._dropTarget.destroy();this._dropTarget=null;}this.inherited(arguments);},resize:function(_12){this.inherited(arguments);if(this.childItems){_1.forEach(this.childItems,function(_13,i){_13.resize();});}},updatePosition:function(_14){var _15=this.informationNode;if(_15){var _16=_5.get(_15,"minHeight");_4.toggle(_15,"epi-overlay-item-info--inside",_14.y<_16);}return this.inherited(arguments);},transferDndControlTo:function(_17){var _18=_17.allowedDndTypes,_19=_17.restrictedDndTypes,_1a=_17.onDropData,_1b=_17;if(this._dropDataHandler){this.disconnect(this._dropDataHandler);this._dropDataHandler=null;}if(!this._dropTarget){this._setupDnd(_1b,_18,_19,_1a);}else{this.own(this._dropDataHandler=this.connect(this._dropTarget,"onDropData",_3.hitch(_17,_1a)));var _1c=_18;this._dropTarget.accept={};if(_1c){_1c.forEach(function(_1d){this._dropTarget.accept[_1d]=1;},this);}var _1e=this.reject;if(_1e){for(var i=0;i<_1e.length;++i){this._dropTarget.accept[_1e[i]]=0;}}}},onDropData:function(_1f,_20,_21,_22){var _23=_1f.map(function(_24){return _24.data;});_7(_23).then(function(_25){var _26=this.dndSourcePropertyName;_25.forEach(function(_27){var _28=_26?_27[_26]:_27;this.onDrop(this,_28);},this);}.bind(this));},_setupDnd:function(_29,_2a,_2b,_2c){if(_2a){this._dropTarget=new _c(this.domNode,{accept:_2a,reject:_2b,createItemOnDrop:false});this._dropDataHandler=this.connect(this._dropTarget,"onDropData",_3.hitch(_29,_2c));this.own(this._dropTarget,this._dropDataHandler);}},_setReadOnlyAttr:function(_2d){this._set("readOnly",_2d);if(this._dropTarget){this._dropTarget.readOnly=_2d;}},_setErrorAttr:function(_2e){this.set("state",_2e?"Error":"");this._set("error",_2e);}});});