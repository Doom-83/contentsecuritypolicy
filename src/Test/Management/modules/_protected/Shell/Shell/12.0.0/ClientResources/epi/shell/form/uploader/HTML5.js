//>>built
define("epi/shell/form/uploader/HTML5",["dojo/_base/declare","dojo/_base/lang","dojox/form/uploader/plugins/HTML5","epi/shell/request/mutators","epi/shell/applicationSettings","epi/shell/XhrWrapper"],function(_1,_2,_3,_4,_5,_6){var _7=_1([_3],{_headers:null,uploadWithFormData:function(_8){return this._getHeadersThenExecute(this.getInherited(arguments),arguments);},sendAsBinary:function(_9){return this._getHeadersThenExecute(this.getInherited(arguments),arguments);},createXhr:function(){var _a=this.inherited(arguments),_b=this._headers;if(_b){for(var _c in _b){if(_b.hasOwnProperty(_c)){_a.setRequestHeader(_c,_b[_c]);}}}_a.setRequestHeader(_5.antiforgeryTokenHeaderName,_6.sharedXsrfHeader);return _a;},_getHeadersThenExecute:function(_d,_e){var _f={options:{headers:{}}};return _4.execute("beforeSend",_f).then(_2.hitch(this,function(_10){this._headers=_10.options.headers;var _11=_d.apply(this,_e);this._headers=null;return _11;}));}});dojox.form.addUploaderPlugin(_7);return _7;});