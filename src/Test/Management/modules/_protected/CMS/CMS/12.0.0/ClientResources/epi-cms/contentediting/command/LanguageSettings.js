//>>built
define("epi-cms/contentediting/command/LanguageSettings",["dojo/_base/declare","dojo/_base/lang","dojo/when","epi/dependency","epi-cms/contentediting/ContentActionSupport","epi/shell/command/_Command","epi/shell/DialogService","epi-cms/ApplicationSettings","epi/i18n!epi/cms/nls/episerver.cms.contentediting.contentdetails.command.languagesettings","epi/i18n!epi/shell/nls/edit.languagesettings","epi/i18n!epi/shell/nls/button","epi/i18n!epi/nls/episerver.shared","xstyle/css!epi-cms/contentediting/AdminWidgets.css"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c){function _d(_e,_f){return {getLanguageSettings:function(){return _e.get(_f);},saveInheritSettings:function(_10){return _e.executeMethod("UpdateInheritSettings",_f,{inheritSettings:_10,id:_f});},saveAvailableLanguages:function(_11){return _e.executeMethod("UpdateAvailableLanguages",_f,{availableLanguages:_11,id:_f,inheritSettingsAvailable:false,inheritSettings:false,languages:null,replacementLanguages:null,fallbackLanguages:null});},saveFallbackLanguages:function(_12){return _e.executeMethod("UpdateFallbackLanguages",_f,{fallbackLanguages:_12,id:_f});},saveReplacementLanguages:function(_13){return _e.executeMethod("UpdateReplacementLanguages",_f,{replacementLanguages:_13,id:_f});}};};return _1([_6],{name:"LanguageSettings",label:_9.label,tooltip:_9.tooltip,store:null,constructor:function(){this.store=_4.resolve("epi.storeregistry").get("epi.cms.languagesettings");this.contentStore=_4.resolve("epi.storeregistry").get("epi.cms.content.light");},_execute:function(){require(["epi-cms/contentediting/AdminWidgets"],function(_14){_3(this.contentStore.get(this.model.contentData.parentLink)).then(function(_15){var _16=Object.assign({},_a,{heading:_2.replace(_a.heading,[this.model.contentData.name]),inheritsettings:_15?_2.replace(_a.inheritsettings,[_15.name]):_a.inheritsettings,change:_b.change,save:_b.save,ok:_b.ok,cancel:_b.cancel});var _17=_d(this.store,this.model.contentData.contentLink);_17.getLanguageSettings().then(function(_18){var _19=new _14.LanguageSettings({model:_17,resources:_16,defaultSettings:_18,helpLink:_8.userGuideUrl+"#languagesettings"});_7.dialog({dialogClass:"epi-dialog-portrait epi-dialog-portrait__autosize epi-dialog--wide",defaultActionsVisible:false,confirmActionText:_c.action.save,content:_19,title:_9.label});});}.bind(this));}.bind(this));},_onModelChange:function(){var _1a=this.model.contentData;var _1b=_5.hasAccess(_1a.accessMask,_5.accessLevel.Administer);this.set("canExecute",_1a.capabilities.languageSettings&&_1b);}});});