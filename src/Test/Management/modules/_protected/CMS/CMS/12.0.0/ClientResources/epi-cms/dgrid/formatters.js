//>>built
define("epi-cms/dgrid/formatters",["dojo/_base/lang","dojo/dom-class","epi/datetime","epi/username","epi/string","epi/shell/dgrid/Formatter","epi/shell/dgrid/util/misc","epi/shell/TypeDescriptorManager","epi-cms/contentediting/ContentActionSupport","epi-cms/widget/viewmodel/ContentStatusViewModel","epi/i18n!epi/cms/nls/episerver.cms.components.versions","epi/i18n!epi/cms/nls/episerver.shared.header"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c){var _d={defaultIconClass:"epi-iconObjectUnknown",thumbnail:function(_e){var _f="<image src=\"{0}?{1}\" class=\"epi-floatLeft epi-thumbnail\"/>";return _e?_1.replace(_f,[_e,new Date().getTime()]):"";},contentIcon:function(_10,_11){return _7.icon(_d.contentIconClass(_10,_11));},contentIconClass:function(_12,_13){var _14=_8.getValue(_12,"iconClass");var _15=_14+" epi-objectIcon";if(_13){_15+=" "+_13;}return _15;},contentTypeDescription:function(_16){return _8.getResourceValue(_16,"name",false);},languageBranch:function(_17){return _17?"<span class=\"epi-missingLanguageIndicator\">"+_17.language+"</span>":"";},menu:function(_18){return _1.replace("<span class=\"dijitInline dijitIcon epi-iconContextMenu epi-floatRight\" title=\"{title}\">&nbsp;</span>",_18);},path:function(_19,_1a){if(_19&&_19.length){_1a=_1a||{};var _1b=_19.join(" > ");var _1c=_1a.skipEncode?_1b:_7.attributeEncode(_1b);_19=_5.truncateMiddle(_19,40,"â€¦");var _1d=_19.map(function(_1e){return _1a.skipEncode?_1e:_7.htmlEncode(_1e);}).join("<span class=\"epi-breadCrumbsSeparator\">&gt;</span>");return _1.replace("<span class=\"{className} dojoxEllipsis\" title=\"{title}\">{text}</span>",{className:_1a.skipDefaultClass?"":"dgrid-column-treePath",title:_1c,text:_1d});}return "";},userName:function(_1f){return _4.toUserFriendlyHtml(_1f);},localizedDate:function(_20){return _3.toUserFriendlyHtml(_20);},friendlyBoolean:function(_21){var _22=_21?"epi-iconCheckmark":"epi-iconStop";return "<div class=\""+_22+"\" />";},versionStatus:function(_23){return _9.getVersionStatus(_23);},commonDraft:function(_24,_25,_26){if(_24.isCommonDraft){_26.innerHTML="<span class=\"dijitReset dijitInline dijitIcon epi-iconPrimary epi-floatRight\" title=\""+_b.primarydraft+"\"></span>";}_26.innerHTML+=_d.versionStatus(_25);},visibleLink:function(_27,_28){if(!_27){return "";}var _29=!_28?_7.htmlEncode(_27):_27;return "<span class=\"epi-visibleLink\">"+_29+"</span>";},secondaryText:function(_2a,_2b){if(!_2a){return "";}var _2c=!_2b?_7.htmlEncode(_2a):_2a;return "<span class=\"epi-secondaryText\">"+_2c+"</span>";},title:function(_2d,_2e,_2f){return _2d+", "+_c.id+": "+_2e+" ("+_c.type+": "+_2f+")";},contentItemFactory:function(_30,_31,_32,_33,_34,_35,_36,_37){return function(_38,_39,_3a,_3b){var _3c,_3d,_3e,_3f,_40,_41,_42,_43;function get(_44){if(typeof _39.get==="function"){return _39.get(_44);}return _39[_44];};function _45(_46){if(_46){if(typeof _46==="function"){return _46(_39);}else{return get(_46);}}return _38;};_41=typeof _38==="string";_3d=_45(_32||(_41?false:"typeIdentifier"));_3e=_45(_30||(_41?false:"text"));_3f=_45(_31||(_41?false:"title"));_40=(_35&&_45(_35))||_39.missingLanguageBranch;_42=_34&&_45(_34);_43=_37?_39.status:null;_3c=_d.contentItem(_3d,_40,_3e,_3f,_33,_42,_36,_43);_3a.innerHTML=_3c;if(_3a.nodeName!=="TD"&&_40){_2.add(_3a,"epi-ct-missingLanguageRow");}return _3c;};},contentItem:function(_47,_48,_49,_4a,_4b,_4c,_4d,_4e){var _4f=(_4b&&_4b.hasMenu)?_d.menu(_4b.settings):"",_50=_d.languageBranch(_48);_4d=(_4d===null||_4d===undefined)?true:_4d;_4a=_4d?_7.attributeEncode(_4a||_49):(_4a||_49);_49=_4d?_7.htmlEncode(_49):_49;var _51="";if(_4e){_51=_d._statusIcon(_4e);}return (_4c?_d.thumbnail(_4c):_d.contentIcon(_47))+_4f+_51+_50+_7.ellipsis(_49,_4a);},_statusIcon:function(_52){if(_52===_9.versionStatus.Published){return "";}var _53=new _a({contentStatus:_52});var _54={cssClass:_53.statusIcon&&_53.statusIcon.join(" "),message:_53.statusMessage};return _1.replace("<span class=\"dijitIcon epi-statusIcon {cssClass}\" title=\"{message}\">&nbsp;</span>",_54);}};_6.addFormatter("contentIcon",_d.contentIcon);_6.addFormatter("userName",_d.userName);_6.addFormatter("versionStatus",_d.versionStatus);_6.addFormatter("localizedDate",_d.localizedDate);_6.addFormatter("contentItem",_d.contentItemFactory,true);return _d;});